{% extends 'base.html.twig' %}

{% block title %}Mon compte{% endblock %}

{% block body %}
  <h1>Mon compte</h1>

  <div class="container f-row f-w al-start just-sb w-100 p-10">
    <div class="profile-grid">
      <div class="profile-photo-cell">
        <img class="photoProfil"
          src="{{ asset(user.photo ?? 'media/default-user.png') }}"
          alt="Photo de profil du conducteur"
        >
        <div class="action-image-buttons" >
          <button
            type="button"
            class="btn-outline-light"
            id="open-modal-btn"
          >
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
            </svg>
          </button>
        </div>
      </div>
      <p class="secondary bold">{{ "Bonport"|default('Conducteur') }}</p>

      {% include 'components/icone/note.html.twig' with {
        starClass: 'infos-voiture__star main f-row g-5 h-25',
        textClass: 'infos-voiture__text secondary'
      } %}
    </div>
    <div class="profile-note-cell">
      {% include 'components/covoiturage/prix.html.twig' with {
        valeur: '20'
      } %}
    </div>
  </div>

  <div class="container f-row w-100 g-10 p-10">
    <!-- Boutons radio -->
    <div class="f-col al-start w-100">
      <h2>Vous êtes</h2>

      <div class="f-row al-center g-10 p-10">
        <input type="radio" id="passage" name="role" value="passage" checked>
        <label class="textInline" for="passage">Passager</label>
      </div>

      <div class="f-row al-center g-10 p-10">
        <input type="radio" id="chauffeur" name="role" value="chauffeur">
        <label class="textInline" for="chauffeur">Chauffeur</label>
      </div>

      <div class="f-row al-center g-10 p-10">
        <input type="radio" id="les2" name="role" value="les2">
        <label class="textInline" for="les2">Les deux</label>
      </div>

      {% include 'components/form/error-alerte.html.twig' with {
        alertMessage: 'Vous devez renseigner au moins 1 véhicule',
        class: 'hidden'
      } %}
    </div>

    <!-- Boutons classiques -->
    <div class="f-col al-start w-100 just-sb maxw-200">
      <a href="#" class="btn btn-main mh-50 w-100">Historique des covoiturages</a>
      <a href="{{ path('app_suggest_trip') }}" class="btn btn-main mh-50 w-100">Proposer un voyage</a>
      <a href="{{ path('app_user_vehicle') }}" class="btn btn-main mh-50 w-100">Gérer mes véhicules</a>
    </div>
  </div>

  <div class="container f-col just-center w-100 g-10 p-10 al-sb">
    <!-- Préférences -->
    <h2>Vos préférences</h2>

    <p>Autorisez-vous les :</p>

    <div class="f-row al-center g-10">
      <input type="checkbox" id="fumeur" name="fumeur" value="fumeur">
      <label class="textInline" for="fumeur">Fumeurs</label>
    </div>

    <div class="f-row al-center g-10">
      <input type="checkbox" id="animaux" name="animaux" value="animaux">
      <label class="textInline" for="animaux">Animaux</label>
    </div>

    {% include 'components/form/input-textarea.html.twig' with {
      inputId: 'preferences',
      placeholder: 'Indiquez ici vos préférences',
      label: 'Avez-vous d\'autres préférences à indiquer ?'
    } %}
  </div>

  <div class="container f-col just-center w-100 g-10 p-10 al-sb">
    <!-- Véhicules -->
    <h2>Mes véhicules</h2>

    {% include 'components/covoiturage/recap-vehicule.html.twig' with {
      imatriculation: 'AB-123-CD',
      marque: 'Citroën',
      model: 'C4',
      class: '',
      pencilIconVisibility: 'hidden'
    } %}

    {% include 'components/covoiturage/recap-vehicule.html.twig' with {
      imatriculation: 'EF-456-GH',
      marque: 'Peugeot',
      model: '208',
      class: '',
      pencilIconVisibility: 'hidden'
    } %}
  </div>

  <div id="modal-edit-photo" class="modal">
    <div class="modal-content">
      <h3>Modifier ma photo de profil</h3>

      <form class="f-col g-15" method="post" enctype="multipart/form-data">
        <label for="photo-input" class="btn btn-sec">Choisir une photo</label>
        <img class="photoProfil"
          src="{{ asset(user.photo ?? 'media/default-user.png') }}"
          alt="Photo de profil du conducteur"
        >
        <input type="file" id="photo-input" name="photo" class="hidden">
        <span id="file-name" class="file-name">Nom du fichier</span>
        <button class="btn btn-main" type="submit">Enregistrer</button>
      </form>

      <button id="close-modal" class="btn btn-annul">Fermer</button>
    </div>
  </div>

{% endblock %}
